pipeline {
     
     agent any
     tools { 
        maven 'maven3.9.1' 
        
     }
     stages{
     
         stage('Git Checkout'){

            steps{
               git branch:'master', url:'https://github.com/Manjunath72/maven-web-application.git'
            }
         }
         stage('Maven Build'){

            steps{
               sh 'mvn package'
               sh 'mvn clean install'
            }
         }
         stage('ExecuteSonarQubeReport'){
         
            steps{
               sh  "mvn clean sonar:sonar"
            }
          }
          stage('upload war files to nexus'){
          
             steps{
               
                 script{
                     nexusArtifactUploader artifacts:
                     [
                       [
                         artifactId: 'maven-web-application', 
                         classifier: '', file: 'target/maven-web-application.war', 
                         type: 'war'
                        ]
                     ], 
                     credentialsId: 'nexuskey', 
                     groupId: 'com.mt', 
                     nexusUrl: 'ec2-3-110-137-95.ap-south-1.compute.amazonaws.com:8081', 
                     nexusVersion: 'nexus3', 
                     protocol: 'http',
                     repository: 'deployment-1', 
                     version: ' 1.0.0'
               }
             }
           }
       }  
}    
     
